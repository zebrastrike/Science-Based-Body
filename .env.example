# =============================================================================
# SCIENCE BASED BODY - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
API_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL via Docker)
# -----------------------------------------------------------------------------
# These match docker-compose.yml environment variables
DB_USER=sbb_user
DB_PASSWORD=your_secure_password_here
DB_NAME=science_based_body

# Full connection string (auto-constructed in Docker, or set manually)
DATABASE_URL=postgresql://sbb_user:your_secure_password_here@postgres:5432/science_based_body?schema=public

# For local development (outside Docker)
# DATABASE_URL=postgresql://sbb_user:your_secure_password_here@localhost:5432/science_based_body?schema=public

# -----------------------------------------------------------------------------
# REDIS (Caching & Job Queue)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://:your_redis_password_here@redis:6379

# For local development (outside Docker)
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_jwt_secret_minimum_32_characters_long
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# Admin credentials (initial seed)
ADMIN_EMAIL=admin@sciencebasedbody.com
ADMIN_PASSWORD=change_this_secure_password

# -----------------------------------------------------------------------------
# ENCRYPTION
# -----------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Used for encrypting PII at rest
ENCRYPTION_KEY=your_64_character_hex_encryption_key_here

# -----------------------------------------------------------------------------
# CLOUDFLARE R2 (Object Storage)
# -----------------------------------------------------------------------------
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key
R2_BUCKET_NAME=sbb-storage
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_REGION=auto

# Buckets
R2_COA_BUCKET=sbb-coa-private
R2_KYC_BUCKET=sbb-kyc-private
R2_PAYMENT_PROOFS_BUCKET=sbb-proofs-private
R2_PRODUCTS_BUCKET=sbb-products-public

# Signed URL expiration (seconds)
R2_SIGNED_URL_EXPIRY=3600

# -----------------------------------------------------------------------------
# CLOUDFLARE (CDN & DNS)
# -----------------------------------------------------------------------------
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_ZONE_ID=your_zone_id
CLOUDFLARE_ACCOUNT_ID=your_account_id

# -----------------------------------------------------------------------------
# EPICOR PROPELLO (Payment Processing - enable when ready)
# -----------------------------------------------------------------------------
EPICOR_PROPELLO_ENABLED=false
EPICOR_PROPELLO_API_URL=https://api.epicorpropello.com/v1
EPICOR_API_KEY=your_propello_api_key
EPICOR_MERCHANT_ID=your_merchant_id
EPICOR_ENVIRONMENT=production
EPICOR_PROPELLO_WEBHOOK_SECRET=your_webhook_signing_secret

# Payment Methods (Manual - active at launch)
PAYMENT_ZELLE_NAME=HEALTH SBB
PAYMENT_ZELLE_PHONE=702-686-5343
PAYMENT_ZELLE_EMAIL=your_zelle_email@example.com
PAYMENT_VENMO_USERNAME=@your_venmo_handle
PAYMENT_VENMO_PHONE=your_venmo_phone
PAYMENT_VENMO_EMAIL=your_venmo_email

# Wire Transfer (wholesale only - via sales agent communication)
# PAYMENT_WIRE_BANK_NAME=
# PAYMENT_WIRE_ROUTING=
# PAYMENT_WIRE_ACCOUNT=

# -----------------------------------------------------------------------------
# EASYPOST (Shipping)
# -----------------------------------------------------------------------------
EASYPOST_API_KEY=your_easypost_test_key_here

# Return/From Address
RETURN_ADDRESS_NAME=SBB Research Materials
RETURN_ADDRESS_STREET=your_az_warehouse_street
RETURN_ADDRESS_CITY=Gilbert
RETURN_ADDRESS_STATE=AZ
RETURN_ADDRESS_ZIP=your_az_zip
RETURN_ADDRESS_COUNTRY=US
RETURN_ADDRESS_PHONE=+1234567890

# -----------------------------------------------------------------------------
# EMAIL (Google Workspace SMTP - replaces Mailgun)
# -----------------------------------------------------------------------------
# Create a Google App Password at: myaccount.google.com/apppasswords
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_workspace_email@sciencebasedbody.com
SMTP_PASS=your_google_app_password
SMTP_FROM_EMAIL=noreply@sciencebasedbody.com
SMTP_FROM_NAME=Science Based Body


# -----------------------------------------------------------------------------
# TWILIO (SMS - Optional)
# -----------------------------------------------------------------------------
TWILIO_ENABLED=false
TWILIO_ACCOUNT_SID=your_twilio_sid
TWILIO_AUTH_TOKEN=your_twilio_token
TWILIO_PHONE_NUMBER=+1234567890

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# -----------------------------------------------------------------------------
# CORS (comma-separated list of allowed origins)
# -----------------------------------------------------------------------------
CORS_ORIGINS=https://sbbpeptides.com,https://www.sbbpeptides.com

# For local development, add:
# CORS_ORIGINS=http://localhost:3000,http://localhost:3002,https://sbbpeptides.com

# -----------------------------------------------------------------------------
# COMPLIANCE
# -----------------------------------------------------------------------------
MINIMUM_AGE=18
KYC_THRESHOLD_FIRST_ORDER=500
KYC_THRESHOLD_TOTAL=1000
COMPLIANCE_CHECKBOX_VERSION=1.0.0

# -----------------------------------------------------------------------------
# HETZNER SERVER
# -----------------------------------------------------------------------------
HETZNER_SERVER_IP=your_hetzner_ip
HETZNER_SSH_USER=root
HETZNER_SSH_KEY_PATH=~/.ssh/hetzner_sbb

# -----------------------------------------------------------------------------
# SSL/TLS
# -----------------------------------------------------------------------------
SSL_CERT_PATH=/etc/letsencrypt/live/sciencebasedbody.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/sciencebasedbody.com/privkey.pem

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
LOG_FORMAT=combined

# -----------------------------------------------------------------------------
# TAXJAR (Sales Tax Calculation & Filing)
# -----------------------------------------------------------------------------
# Sign up at taxjar.com (~$19/mo), configure nexus states in dashboard
# Company: Montana LLC, ships from Arizona - TaxJar handles nexus determination
TAXJAR_API_KEY=your_taxjar_api_token
TAXJAR_FROM_STREET=your_az_warehouse_street
TAXJAR_FROM_CITY=Gilbert
TAXJAR_FROM_STATE=AZ
TAXJAR_FROM_ZIP=your_az_zip
TAXJAR_FROM_COUNTRY=US

# -----------------------------------------------------------------------------
# FILE UPLOADS (Temporary local storage until Cloudflare R2 available)
# -----------------------------------------------------------------------------
UPLOAD_DIR=./uploads

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
FEATURE_SUBSCRIPTIONS=true
FEATURE_WHOLESALE=true
FEATURE_CRYPTO_PAYMENTS=false
