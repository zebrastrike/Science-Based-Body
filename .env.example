# =============================================================================
# SCIENCE BASED BODY - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
API_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL via Docker)
# -----------------------------------------------------------------------------
# These match docker-compose.yml environment variables
DB_USER=sbb_user
DB_PASSWORD=your_secure_password_here
DB_NAME=science_based_body

# Full connection string (auto-constructed in Docker, or set manually)
DATABASE_URL=postgresql://sbb_user:your_secure_password_here@postgres:5432/science_based_body?schema=public

# For local development (outside Docker)
# DATABASE_URL=postgresql://sbb_user:your_secure_password_here@localhost:5432/science_based_body?schema=public

# -----------------------------------------------------------------------------
# REDIS (Caching & Job Queue)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://:your_redis_password_here@redis:6379

# For local development (outside Docker)
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_jwt_secret_minimum_32_characters_long
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# Admin credentials (initial seed)
ADMIN_EMAIL=admin@sciencebasedbody.com
ADMIN_PASSWORD=change_this_secure_password

# -----------------------------------------------------------------------------
# ENCRYPTION
# -----------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Used for encrypting PII at rest
ENCRYPTION_KEY=your_64_character_hex_encryption_key_here

# -----------------------------------------------------------------------------
# CLOUDFLARE R2 (Object Storage)
# -----------------------------------------------------------------------------
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key
R2_BUCKET_NAME=sbb-storage
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_REGION=auto

# Buckets
R2_COA_BUCKET=sbb-coa-private
R2_KYC_BUCKET=sbb-kyc-private
R2_PAYMENT_PROOFS_BUCKET=sbb-proofs-private
R2_PRODUCTS_BUCKET=sbb-products-public

# Signed URL expiration (seconds)
R2_SIGNED_URL_EXPIRY=3600

# -----------------------------------------------------------------------------
# CLOUDFLARE (CDN & DNS)
# -----------------------------------------------------------------------------
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_ZONE_ID=your_zone_id
CLOUDFLARE_ACCOUNT_ID=your_account_id

# -----------------------------------------------------------------------------
# EPICOR PROPELLO (Payment Processing)
# -----------------------------------------------------------------------------
EPICOR_PROPELLO_ENABLED=true
EPICOR_PROPELLO_API_URL=https://api.epicorpropello.com/v1
EPICOR_API_KEY=your_propello_api_key
EPICOR_MERCHANT_ID=your_merchant_id
EPICOR_ENVIRONMENT=production
EPICOR_PROPELLO_WEBHOOK_SECRET=your_webhook_signing_secret

# Fallback Payment Methods (Manual)
PAYMENT_ZELLE_EMAIL=jamieespositofit@gmail.com
PAYMENT_CASHAPP_TAG=
PAYMENT_WIRE_BANK_NAME= email for instructions 
PAYMENT_WIRE_ROUTING=12201000
PAYMENT_WIRE_ACCOUNT=

# -----------------------------------------------------------------------------
# SHIPPO (Shipping)
# -----------------------------------------------------------------------------
SHIPPO_API_KEY=shippo_test_your_key_here
SHIPPO_RETURN_NAME=SBB Research Materials
SHIPPO_RETURN_STREET=123 Research Way
SHIPPO_RETURN_CITY=Miami
SHIPPO_RETURN_STATE=FL
SHIPPO_RETURN_ZIP=33101
SHIPPO_RETURN_COUNTRY=US
SHIPPO_RETURN_PHONE=+1234567890

# -----------------------------------------------------------------------------
# MAILGUN (Email)
# -----------------------------------------------------------------------------
MAILGUN_API_KEY=your_mailgun_api_key
MAILGUN_DOMAIN=mg.sciencebasedbody.com
MAILGUN_FROM_EMAIL=noreply@sciencebasedbody.com
MAILGUN_FROM_NAME=Science Based Body

# -----------------------------------------------------------------------------
# TWILIO (SMS - Optional)
# -----------------------------------------------------------------------------
TWILIO_ENABLED=false
TWILIO_ACCOUNT_SID=your_twilio_sid
TWILIO_AUTH_TOKEN=your_twilio_token
TWILIO_PHONE_NUMBER=+1234567890

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# -----------------------------------------------------------------------------
# CORS (comma-separated list of allowed origins)
# -----------------------------------------------------------------------------
CORS_ORIGINS=https://sciencebasedbody.com,https://www.sciencebasedbody.com

# For local development, add:
# CORS_ORIGINS=http://localhost:3000,http://localhost:3002,https://sciencebasedbody.com

# -----------------------------------------------------------------------------
# COMPLIANCE
# -----------------------------------------------------------------------------
MINIMUM_AGE=21
KYC_THRESHOLD_FIRST_ORDER=500
KYC_THRESHOLD_TOTAL=1000
COMPLIANCE_CHECKBOX_VERSION=1.0.0

# -----------------------------------------------------------------------------
# HETZNER SERVER
# -----------------------------------------------------------------------------
HETZNER_SERVER_IP=your_hetzner_ip
HETZNER_SSH_USER=root
HETZNER_SSH_KEY_PATH=~/.ssh/hetzner_sbb

# -----------------------------------------------------------------------------
# SSL/TLS
# -----------------------------------------------------------------------------
SSL_CERT_PATH=/etc/letsencrypt/live/sciencebasedbody.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/sciencebasedbody.com/privkey.pem

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
LOG_FORMAT=combined

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
FEATURE_SUBSCRIPTIONS=true
FEATURE_WHOLESALE=true
FEATURE_CRYPTO_PAYMENTS=false
